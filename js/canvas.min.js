function init(){canvas=document.getElementById("welcomeCanvas"),imgSprite.onload=handleImageLoad,imgSprite.onerror=handleImageError,imgSprite.src="images/sprites.png"}function handleImageLoad(a){numberOfImagesLoaded++,1==numberOfImagesLoaded&&(numberOfImagesLoaded=0,startSprite())}function reset(){stage.removeAllChildren(),createjs.Ticker.removeAllListeners(),stage.update()}function startSprite(){stage=new createjs.Stage(canvas),$("body").width()>700?screen_width=canvas.width:(screen_width=100,$(".phone-box").css("left",76)),screen_height=canvas.height;var a=new createjs.SpriteSheet({images:[imgSprite],frames:{width:81,height:193,regX:81,regY:0},animations:{walkLeft:[0,3,"walkLeft",12],walkRight:[4,7,"walkRight",12],welcome:[8,9,"welcome",2],intro:[10,11,"intro",2],end:[10]}});createjs.SpriteSheetUtils.addFlippedFrames(a,!0,!1,!1),bmpAnimation=new createjs.BitmapAnimation(a),bmpAnimation.gotoAndPlay("walkLeft"),bmpAnimation.name="fpt-girl",bmpAnimation.direction=90,bmpAnimation.vX=1,bmpAnimation.currentFrame=0,stage.addChild(bmpAnimation),createjs.Ticker.addListener(window),createjs.Ticker.useRAF=!0,createjs.Ticker.setFPS(60)}function handleImageError(a){console.log("Error Loading Image : "+a.target.src)}function tick(){isIntro||isClose?isIntro&&!isClose&&(isStop=!0,createjs.Ticker.setFPS(3),11==bmpAnimation.currentFrame&&(bmpAnimation.currentFrame=10,createjs.Ticker.setPaused(!0),stage.update()),setTimeout(function(){createjs.Ticker.setPaused(!1)},3e3),isOpenBox||(isOpenBox=!0,openGetPhoneBox())):bmpAnimation.x>=screen_width-16&&(bmpAnimation.gotoAndStop("walkLeft"),bmpAnimation.gotoAndPlay("welcome"),isStop=!0,createjs.Ticker.setFPS(2),setTimeout(function(){bmpAnimation.gotoAndStop("welcome"),setTimeout(function(){isIntro=!0,createjs.Ticker.setFPS(60),bmpAnimation.gotoAndPlay("intro"),bmpAnimation.currentFrame=10},1e3)},400)),isClose&&(isRight||(isRight=!0,createjs.Ticker.setFPS(2),bmpAnimation.gotoAndStop("intro"),bmpAnimation.gotoAndPlay("welcome"),stage.update(),setTimeout(function(){$(".phone-box").removeAttr("style").addClass("active"),$("#txtGetPhone").attr("placeholder","Nhập số điện thoại của bạn"),bmpAnimation.gotoAndStop("welcome"),bmpAnimation.direction-=90,createjs.Ticker.setFPS(60),bmpAnimation.gotoAndPlay("walkRight")},400))),bmpAnimation.x<85&&isClose&&(bmpAnimation.gotoAndStop("walkRight"),createjs.Ticker.setPaused(!0),bmpAnimation.gotoAndPlay("end"),stage.update(),$("#welcomeCanvas").animate({top:"20px"},500,function(){$("#welcomeCanvas").hide()}),$("#txtGetPhone").unbind("blur"),createjs.Ticker.removeAllListeners(),stage.update()),isStop||90!=bmpAnimation.direction?isClose&&(bmpAnimation.x-=bmpAnimation.vX):bmpAnimation.x+=bmpAnimation.vX,stage.update()}function closePhoneBox(){$(".content-phone-box").css({visibility:"hidden"}),$(".phone-box").css({width:"20px",height:"20px",padding:"0",visibility:"hidden"}),isStop=!1,isClose=!0}function openGetPhoneBox(){$("body").width()>700?$(".phone-box").css({width:"300px",height:"130px",padding:"12px",visibility:"visible"}):$(".phone-box").css({width:"200px",height:"130px",padding:"12px",visibility:"visible"}),setTimeout(function(){$(".content-phone-box").css({visibility:"visible"})},250),$("#btnGetPhone").click(function(a){$("#typeNameBox").val();a.preventDefault();var c=/^0[0-9]{9,10}$/;c.test($("#txtGetPhone").val())||alert("Số điện thoại không đúng, vui lòng nhập lại")}),$(".close-phone-box").click(function(a){a.preventDefault(),setCookie("hideSuggest","true"),closePhoneBox()}),$(".close-canvas").click(function(a){a.preventDefault(),$(".canvasHolder").css({bottom:"-200px"})}),setTimeout(function(){$.trim($("#txtGetPhone").val()).length<=0&&($("#txtGetPhone").is(":focus")||($(".content-phone-box").css({visibility:"hidden"}),closePhoneBox())),$("#txtGetPhone").blur(function(){$.trim($("#txtGetPhone").val()).length<=0&&($(".content-phone-box").css({visibility:"hidden"}),closePhoneBox())})},18e4)}function setCookie(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="expires="+d.toUTCString();document.cookie=a+"="+b+"; "+e}function getCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return""}var canvas,stage,screen_width,screen_height,bmpAnimation,bmpAnimationWelcome,bmpAnimationWelcome2,isStop=!1,isIntro=!1,isRight=!1,isClose=!1,isOpenBox=!1,_this=this,$=jQuery,numberOfImagesLoaded=0,imgSprite=new Image;jQuery(document).ready(function(a){"true"!=getCookie("hideSuggest")?a("#welcomeCanvas").length>0&&setTimeout(function(){init(),a(".content-text-hide a").attr("href",a(".main-phone-box a").attr("href"))},2e3):a(".canvasHolder").remove()}),jQuery(document).ready(function(a){a("body").width()>700?a(".suggest-box .box-content").owlCarousel({stopOnHover:!0,slideSpeed:300,paginationSpeed:400,pagination:!1,singleItem:!0,autoPlay:3e3,items:1,itemsDesktopSmall:1,itemsTablet:1,itemsMobile:1}):(a(".phone-box").css("width",200),a(".content-phone-box").css("width",175),a(".suggest-box .box-content").owlCarousel({stopOnHover:!0,slideSpeed:300,paginationSpeed:400,pagination:!1,singleItem:!0,autoPlay:3e3,items:1,itemsDesktopSmall:1,itemsTablet:1,itemsMobile:1}))});